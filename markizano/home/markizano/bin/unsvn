#!/bin/bash

function _unsvn(){
  find "$1" -type d -name .svn -prune -exec rm -Rf {} \;
  return 0;
}

if [ -z "$1" ]; then
	target="$PWD";
else
	if echo $1 | grep -Piq '\x2D\x2D?h(elp)?'; then
		echo "Usage: $0 [file]";
		exit 8;
	fi

	if [ ! -d "$1" ]; then
		echo "$(basename "$0"): cannot stat \`$1'. No such directory." 1>&2;
	fi

	target="$1";
fi

read -p "Are you sure you want to unsvn ${target}?" confirm;
echo $confirm | grep -iPq 'y(es)?' && _unsvn "$target" || echo Abort.;
