#!/usr/bin/php
<?php

$args = $_SERVER['argv'];
if(!isset($args[1])||strToLower($args[1])=='--help'||strToLower($args[1])=='-h'){
?>
Usage: <?php print $args[0]; ?> File_Size [File]
File_Size		Size of the file to create
File			Location to output data. If no file given, output to standard output
<?php
	return 0;
}

#$output = str_repeat(chr(0), (int)$args[1]);
if(isset($args[2])){
	$f = fOpen($args[2], 'wb');
	for($i = 0;$i <= (int)$args[1]; $i++){
		fWrite($f, chr(0).'.');
		if($i % 102400 == 1){
			print "Wrote $i bytes";
			if($i >= 1024){$K = (int)($i / 1024); print ", {$K}K";}
			if($i >= 1024){$M = (int)($i / 1024 / 1024); print ", {$M}M";}
			if($i >= 1024){$G = (int)($i / 1024 / 1024 / 1024); print ", {$G}G";}
			print chr(10);
		}
	}
	fClose($f);
	print "Wrote $args[2] bytes to $args[1]\n";
}else{
	for($i = 0;$i <= (int)$args[1]; $i++){
		print chr(0);
	}
}

