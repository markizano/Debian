#!/bin/php
<?php

$args =& $_SERVER['argv'];

function Usage(){
        $SELF = basename($_SERVER['argv'][0]);
        print <<<EOF
$SELF: Converts line breaks to <br />
Usage: $SELF [input]
Takes all arguments as input, if no arguments are given, or if argument 1 is "-"
then assume input to be stdin.\n
EOF
;
        return 0;
}

if(isset($args[1]) && preg_match('/--?h(elp)?/i', $args[1])){
        Usage();
        die(1);
}

unset($args[0]);
$arg = join(chr(32), $args);
$input = (empty($arg) || $arg == '-') ? file_get_contents('php://stdin'): $arg;
file_put_contents('php://stdout', nl2br($input));
